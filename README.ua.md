# üì± Android Pocket Server Handbook

**–Ø–∫ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–∞—Ä–∏–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω –Ω–∞ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –±–æ—Ç—ñ–≤ (Python, AI, Tunneling).**

–¶–µ–π –ø–æ—Å—ñ–±–Ω–∏–∫ –æ–ø–∏—Å—É—î, —è–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **Termux** –Ω–∞ Android –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥—É Telegram-–±–æ—Ç—ñ–≤, –≤–µ–±-–¥–æ–¥–∞—Ç–∫—ñ–≤ —á–∏ —Å–∫—Ä–∏–ø—Ç—ñ–≤ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ (PM2, Cloudflare, Logrotate). –ñ–æ–¥–Ω–∏—Ö VPS, –ª–∏—à–µ —Ç–≤—ñ–π —Ç–µ–ª–µ—Ñ–æ–Ω.

---

## üöÄ –†–æ–∑–¥—ñ–ª 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ Termux

–ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ Linux-—Ç–µ—Ä–º—ñ–Ω–∞–ª.

**1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–∑–∏:**

```bash
pkg update && pkg upgrade
pkg install python nodejs git openssh
```

**2. –ë–µ–∑—Å–º–µ—Ä—Ç—è (Wakelock):**
–©–æ–± Android –Ω–µ "–≤–±–∏–≤–∞–≤" –ø—Ä–æ—Ü–µ—Å–∏ —É —Ñ–æ–Ω—ñ, —Ç—Ä–µ–±–∞ –∑–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å–æ—Ä—É —Å–ø–∞—Ç–∏.
* –ù–∞—Ç–∏—Å–Ω–∏ `Acquire Wakelock` —É —à—Ç–æ—Ä—Ü—ñ —Å–ø–æ–≤—ñ—â–µ–Ω—å Termux.
* –ê–±–æ –≤–≤–µ–¥–∏ –∫–æ–º–∞–Ω–¥—É:

```bash
termux-wake-lock
```

---

## üö™ –†–æ–∑–¥—ñ–ª 2: SSH —Ç–∞ –í—ñ–¥–¥–∞–ª–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø

–Ø–∫ –∫–µ—Ä—É–≤–∞—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º –∑ –Ω–æ—É—Ç–±—É–∫–∞ —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç (–æ–±—Ö—ñ–¥ NAT –±–µ–∑ "–±—ñ–ª–æ—ó" IP).

### 1. SSH –°–µ—Ä–≤–µ—Ä

–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ:

```bash
# –ó–∞–¥–∞—Ç–∏ –ø–∞—Ä–æ–ª—å (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ!)
passwd

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8022)
sshd

# –î—ñ–∑–Ω–∞—Ç–∏—Å—è —Å–≤—ñ–π –ª–æ–≥—ñ–Ω
whoami
```

**‚ö†Ô∏è –ù—é–∞–Ω—Å:** SSH —É Termux –ø—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É **8022**.

### 2. Cloudflare Tunnel (cloudflared)

–ü—Ä–æ–±–∏–≤–∞—î–º–æ —Ç—É–Ω–µ–ª—å —É –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–≤—ñ—Ç.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ (ARM64):**

```bash
wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64
mv cloudflared-linux-arm64 $PREFIX/bin/cloudflared
chmod +x $PREFIX/bin/cloudflared
```

**–ó–∞–ø—É—Å–∫ (–†—É—á–Ω–∏–π —Ç–µ—Å—Ç):**

```bash
cloudflared tunnel run --token <–¢–í–Ü–ô_–¢–û–ö–ï–ù>
```

**–ó–∞–ø—É—Å–∫ (–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —á–µ—Ä–µ–∑ PM2):**
*‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ –≤–∫–∞–∑—É–≤–∞—Ç–∏ –ø–æ–≤–Ω–∏–π —à–ª—è—Ö, —â–æ–± PM2 –Ω–µ –≥—É–±–∏–≤—Å—è:*

```bash
pm2 start /data/data/com.termux/files/usr/bin/cloudflared --name "moto" -- tunnel run --token <–¢–í–Ü–ô_–¢–û–ö–ï–ù>
```

**–§—ñ–∫—Å DNS** (—è–∫—â–æ –ø–∞–¥–∞—î –∑ –ø–æ–º–∏–ª–∫–æ—é connection refused):
–í—ñ–¥–∫—Ä–∏–π `nano $PREFIX/etc/resolv.conf` —ñ –ø—Ä–æ–ø–∏—à–∏:

```text
nameserver 1.1.1.1
```

### 3. –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ –ö–ª—ñ—î–Ω—Ç–∞ (PC/Mac)

–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `~/.ssh/config`:

```text
Host moto
  HostName moto.tvij-domen.pp.ua
  User u0_a... (—Ç–≤—ñ–π –ª–æ–≥—ñ–Ω –∑ —Ç–µ–ª–µ—Ñ–æ–Ω—É)
  ProxyCommand cloudflared access ssh --hostname %h
```

–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:
```bash
ssh moto
```

---

## ‚öôÔ∏è –†–æ–∑–¥—ñ–ª 3: PM2 (–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—ñ–≤)

–ó–∞–ø—É—Å–∫–∞—î–º–æ —Å–∫—Ä–∏–ø—Ç–∏ —è–∫ —Å–µ—Ä–≤—ñ—Å–∏ (–∞–≤—Ç–æ—Ä–µ—Å—Ç–∞—Ä—Ç, –ª–æ–≥–∏, —Ñ–æ–Ω).

**1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:**

```bash
npm install pm2 -g
```

**2. –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:**

* `pm2 start bot.py --interpreter python --name "my-bot"` ‚Äî –∑–∞–ø—É—Å–∫ Python-–±–æ—Ç–∞.
* `pm2 list` ‚Äî —Å—Ç–∞—Ç—É—Å —É—Å—ñ—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤.
* `pm2 logs` ‚Äî –ø–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤.
* `pm2 save` ‚Äî **–∑–±–µ—Ä–µ–≥—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—ñ–≤** (—â–æ–± –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è).
* `pm2 resurrect` ‚Äî –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –ø—Ä–æ—Ü–µ—Å–∏.

---

## üßπ –†–æ–∑–¥—ñ–ª 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —á–∏—Å—Ç–∫–∞ (Logrotate)

–©–æ–± –ª–æ–≥–∏ –Ω–µ –∑'—ó–ª–∏ –≤—Å—é –ø–∞–º'—è—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω—É.

**1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–¥—É–ª—è:**

```bash
pm2 install pm2-logrotate
```

**2. –û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥:**

```bash
# –õ—ñ–º—ñ—Ç —Ä–æ–∑–º—ñ—Ä—É —Ñ–∞–π–ª—É (10 –ú–ë)
pm2 set pm2-logrotate:max_size 10M

# –†–æ—Ç–∞—Ü—ñ—è –ø–æ –ü–æ–Ω–µ–¥—ñ–ª–∫–∞—Ö —ñ –ß–µ—Ç–≤–µ—Ä–≥–∞—Ö
pm2 set pm2-logrotate:rotateInterval '0 0 * * 1,4'

# –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ 3 –æ—Å—Ç–∞–Ω–Ω—ñ –∞—Ä—Ö—ñ–≤–∏
pm2 set pm2-logrotate:retain 3
pm2 set pm2-logrotate:compress true
```

**3. –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**

```bash
pm2 save
```

---

## ü§ñ –ë–æ–Ω—É—Å: –®–∞–±–ª–æ–Ω .env –¥–ª—è –±–æ—Ç—ñ–≤

**–ù—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω–∏ –≤ –∫–æ–¥—ñ! –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è.**

–§–∞–π–ª `.env`:

```ini
BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
GROQ_API_KEY=gsk_...
ADMIN_ID=123456789
```

–£ –∫–æ–¥—ñ Python:

```python
import os
from dotenv import load_dotenv

load_dotenv()
token = os.getenv("BOT_TOKEN")
```
